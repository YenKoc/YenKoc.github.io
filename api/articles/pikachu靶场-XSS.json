{"title":"pikachu靶场-XSS","uid":"4b815d1a9fd6704c9aee8cee1d9828dc","slug":"pikachu靶场-XSS","date":"2021-04-16T01:34:32.000Z","updated":"2021-04-16T05:30:40.058Z","comments":true,"path":"api/articles/pikachu靶场-XSS.json","keywords":null,"cover":"https://i0.hdslb.com/bfs/article/4c718f8e245a22593c95dfd77a145ac064eade72.jpg@1320w_1144h.webp","content":"<h1 id=\"xss（跨站脚本）概述\"><a href=\"#xss（跨站脚本）概述\" class=\"headerlink\" title=\"xss（跨站脚本）概述\"></a>xss（跨站脚本）概述</h1><p>一般xss可以分为如下几种常见的类型：</p>\n<ol>\n<li>反射性xss</li>\n<li>存储型xss</li>\n<li>Dom型xss</li>\n</ol>\n<h1 id=\"反射型xss-get\"><a href=\"#反射型xss-get\" class=\"headerlink\" title=\"反射型xss(get)\"></a>反射型xss(get)</h1><p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416093923.png\"></p>\n<p>一个输入框，然后输入的时候，发现会出现，我输入什么，下面会直接显示出一句话加上我输入的地方，这里就容易出现xss漏洞，先弹窗，弹下</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416094115.png\"></p>\n<p>并没有什么过滤，和转义，直接弹窗成功，hhh</p>\n<h1 id=\"反射性xss（post）\"><a href=\"#反射性xss（post）\" class=\"headerlink\" title=\"反射性xss（post）\"></a>反射性xss（post）</h1><p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416110155.png\"></p>\n<p>直接admin/123后，根据提示，是获取cookie，搜了下获取cookie的xss手法，直接打，然后发现还有一种可以将cookie传输到其他服务器的，nb</p>\n<h1 id=\"存储型xss\"><a href=\"#存储型xss\" class=\"headerlink\" title=\"存储型xss\"></a>存储型xss</h1><p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416110556.png\"></p>\n<p>发现一个留言板，输入的会显示在页面上，而且是持久化的，存储在数据库里，大概逻辑就是我们输入，然后发请求，在数据库中，插入一条记录，并返回响应，刷新页面，将新的记录显示出来，，那么如果这里有xss，每次刷新也意味着都会执行一次</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416110826.png\"></p>\n<h1 id=\"dom型xss\"><a href=\"#dom型xss\" class=\"headerlink\" title=\"dom型xss\"></a>dom型xss</h1><p>主要是构造dom树的语法，各种html标签，对我这种垃圾全栈还暂时不是问题</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416113650.png\"></p>\n<p>发现我们输入的内容在dom里面，那我们就可以构造输入内容，闭合a标签，然后添加上我们的payload，注意那个函数，里面的单引号，这里得注意，</p>\n<p>payload：’&gt;<img src=# onmouseover=\"alert(1)\"/></p>\n<h1 id=\"dom-xss-a\"><a href=\"#dom-xss-a\" class=\"headerlink\" title=\"dom xss-a\"></a>dom xss-a</h1><p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416114207.png\"></p>\n<h1 id=\"xss-盲打\"><a href=\"#xss-盲打\" class=\"headerlink\" title=\"xss 盲打\"></a>xss 盲打</h1><p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416123128.png\"></p>\n<p>盲打的意思是前端是没把内容返回出来的，但是后台管理员在查看后台消息时，如果没对xss进行过滤或者转义，那么管理员会看到xss的效果，上图是我提交后，登录后台看到的</p>\n<h1 id=\"xss过滤\"><a href=\"#xss过滤\" class=\"headerlink\" title=\"xss过滤\"></a>xss过滤</h1><p>观察下源码</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416125951.png\"></p>\n<p>发现是过滤了&lt;开头，中间包含script这几个字符的，全部替换成空了，emm，那么全大写不就过了，，或者使用img标签，不也能过</p>\n<h1 id=\"xss-htmlchar\"><a href=\"#xss-htmlchar\" class=\"headerlink\" title=\"xss htmlchar\"></a>xss htmlchar</h1><p>这玩意会将我们输入的字符进行转义，</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416131112.png\"></p>\n<p>但是并没有对我们的单引号进行转义，我们依然可以构造xss</p>\n<p>‘onclick=’alert(1). 这里第一个单引号是为了闭合href的双引号，第二个单引号，是为了后一个单引号</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416131414.png\"></p>\n<h1 id=\"xss-href输出\"><a href=\"#xss-href输出\" class=\"headerlink\" title=\"xss href输出\"></a>xss href输出</h1><p>手动fuzz了下，发现单引号什么的，没用了，估计被过滤了，这里href还可以尝试伪协议进行绕过</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416131905.png\"></p>\n<h1 id=\"xss-的js输出\"><a href=\"#xss-的js输出\" class=\"headerlink\" title=\"xss 的js输出\"></a>xss 的js输出</h1><p>在响应包发现我们的输入，赋值给了一个变量，那么我们可以通过构造出自己的js代码，这样也可以执行就像这样</p>\n<p><img src=\"https://raw.githubusercontent.com/YenKoc/YenKoc_tuchuang/main/images20210416132944.png\"></p>\n","feature":null,"text":"xss（跨站脚本）概述一般xss可以分为如下几种常见的类型： 反射性xss 存储型xss Dom型xss 反射型xss(get) 一个输入框，然后输入的时候，发现会出现，我输入什么，下面会直接显示出一句话加上我输入的地方，这里就容易出现xss漏洞，先弹窗，弹下 并没有什么过滤，和...","link":"","photos":[],"count_time":{"symbolsCount":923,"symbolsTime":"1 mins."},"categories":[{"name":"渗透测试","slug":"渗透测试","count":3,"path":"api/categories/渗透测试.json"}],"tags":[{"name":"渗透测试","slug":"渗透测试","count":3,"path":"api/tags/渗透测试.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss%EF%BC%88%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%EF%BC%89%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">xss（跨站脚本）概述</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%B0%84%E5%9E%8Bxss-get\"><span class=\"toc-text\">反射型xss(get)</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%B0%84%E6%80%A7xss%EF%BC%88post%EF%BC%89\"><span class=\"toc-text\">反射性xss（post）</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AD%98%E5%82%A8%E5%9E%8Bxss\"><span class=\"toc-text\">存储型xss</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#dom%E5%9E%8Bxss\"><span class=\"toc-text\">dom型xss</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#dom-xss-a\"><span class=\"toc-text\">dom xss-a</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss-%E7%9B%B2%E6%89%93\"><span class=\"toc-text\">xss 盲打</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss%E8%BF%87%E6%BB%A4\"><span class=\"toc-text\">xss过滤</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss-htmlchar\"><span class=\"toc-text\">xss htmlchar</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss-href%E8%BE%93%E5%87%BA\"><span class=\"toc-text\">xss href输出</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#xss-%E7%9A%84js%E8%BE%93%E5%87%BA\"><span class=\"toc-text\">xss 的js输出</span></a></li></ol>","author":{"name":"YenKoc","avatar":"https://avatars.githubusercontent.com/u/52554268?s=400&u=e21e2b4ac372eaf3c2bc9c720c1ac24f974e936a&v=4","link":""},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"pikachu靶场-CSRF","date":"2021-04-16T07:24:58.532Z","updated":"2021-04-16T07:56:36.812Z","comments":true,"path":"api/articles/pikachu靶场-CSRF.json","keywords":null,"cover":[],"text":"概述 有一说一，这里概述讲的非常清晰了，尤其是xss和csrf的区别，csrf其实就是借用他人的手去干坏事，而不是我们去拿到他的cookie去干坏事的，这里区别还是有的，核心表现就是搞个虚假链接，事先把要接口和参数写好，一点击就立马发送请求，测试了下是会自动加cookie的，所以...","link":"","photos":[],"count_time":{"symbolsCount":562,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"YenKoc","avatar":"https://avatars.githubusercontent.com/u/52554268?s=400&u=e21e2b4ac372eaf3c2bc9c720c1ac24f974e936a&v=4","link":""}},"next_post":{"title":"pikachu靶场-暴力破解","uid":"40d02940207fb31febc4e2293b7db511","slug":"pikachu靶场-暴力破解","date":"2021-04-15T13:31:57.000Z","updated":"2021-04-15T13:48:07.721Z","comments":true,"path":"api/articles/pikachu靶场-暴力破解.json","keywords":null,"cover":"https://i0.hdslb.com/bfs/article/abc2686aef48658fc338abb4a73da30918eff274.jpg@1320w_1070h.webp","text":"1. 基于表单的暴力破解 这玩意就是考bp的爆破模块的使用，这里有两个框需要爆破，那么bp的爆破模块的模式选择也得发生变化 将我们需要所要爆破的地方，加$符号，然后攻击类型选择clusterbomb，这个是适用于多个参数进行爆破的，模式是笛卡尔积 直接跑就完事了 2. 验证码绕过...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"渗透测试","slug":"渗透测试","count":3,"path":"api/categories/渗透测试.json"}],"tags":[{"name":"渗透测试","slug":"渗透测试","count":3,"path":"api/tags/渗透测试.json"}],"author":{"name":"YenKoc","avatar":"https://avatars.githubusercontent.com/u/52554268?s=400&u=e21e2b4ac372eaf3c2bc9c720c1ac24f974e936a&v=4","link":""}}}